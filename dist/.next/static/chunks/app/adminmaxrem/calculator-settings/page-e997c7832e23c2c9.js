(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[280],{9743:function(e,r,t){Promise.resolve().then(t.bind(t,3207))},9376:function(e,r,t){"use strict";var a=t(5475);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},3207:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return o}});var a=t(7437),s=t(2265),l=t(9376),i=t(2434),n=t(6334),c=t(757),d=t(2827);function o(){let e=(0,l.useRouter)(),[r,t]=(0,s.useState)(!1),[o,m]=(0,s.useState)(!0),[x,u]=(0,s.useState)(!1),[h,b]=(0,s.useState)(null);(0,s.useEffect)(()=>{"authenticated"===localStorage.getItem("adminToken")?(t(!0),g()):e.push("/adminmaxrem"),m(!1)},[e]);let g=async()=>{try{let e=await fetch("/api/calculator-config");if(e.ok){let r=await e.json();b(r)}}catch(e){console.error("Error loading config:",e)}},p=async()=>{if(h){u(!0);try{(await fetch("/api/calculator-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok?alert("Настройки успешно сохранены!"):alert("Ошибка при сохранении настроек")}catch(e){console.error("Error saving config:",e),alert("Ошибка при сохранении настроек")}finally{u(!1)}}},v=async()=>{if(confirm("Вернуть настройки по умолчанию? Все изменения будут потеряны."))try{let e=await fetch("/api/calculator-config",{method:"POST"});if(e.ok){let r=await e.json();b(r.config),alert("Настройки сброшены к значениям по умолчанию")}}catch(e){console.error("Error resetting config:",e),alert("Ошибка при сбросе настроек")}},y=(e,r)=>{if(!h)return;let t=JSON.parse(JSON.stringify(h)),a=t;for(let r=0;r<e.length-1;r++)a=a[e[r]];a[e[e.length-1]]=r,b(t)};return o?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Загрузка..."})}):r&&h?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow",children:(0,a.jsx)(i.W,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Настройки калькулятора"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Управление ценами и коэффициентами"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(n.z,{onClick:()=>e.push("/adminmaxrem/dashboard"),variant:"outline",children:"Назад"}),(0,a.jsx)(n.z,{onClick:()=>{localStorage.removeItem("adminToken"),e.push("/adminmaxrem")},variant:"outline",children:"Выйти"})]})]})})}),(0,a.jsx)("main",{className:"py-10",children:(0,a.jsx)(i.W,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(c.Z,{children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Базовая цена за м\xb2"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Цена зависит от типа отделки"})]}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Косметический ремонт (₽/м\xb2)"}),(0,a.jsx)(d.I,{type:"number",value:h.basePrice.косметический,onChange:e=>y(["basePrice","косметический"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дизайнерский ремонт (₽/м\xb2)"}),(0,a.jsx)(d.I,{type:"number",value:h.basePrice.дизайнерский,onChange:e=>y(["basePrice","дизайнерский"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Капитальный ремонт (₽/м\xb2)"}),(0,a.jsx)(d.I,{type:"number",value:h.basePrice.капитальный,onChange:e=>y(["basePrice","капитальный"],Number(e.target.value))})]})]})})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Коэффициенты типа объекта"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Умножается на базовую цену"})]}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Квартира (коэф.)"}),(0,a.jsx)(d.I,{type:"number",step:"0.1",value:h.objectType.квартира,onChange:e=>y(["objectType","квартира"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Офис (коэф.)"}),(0,a.jsx)(d.I,{type:"number",step:"0.1",value:h.objectType.офис,onChange:e=>y(["objectType","офис"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дом (коэф.)"}),(0,a.jsx)(d.I,{type:"number",step:"0.1",value:h.objectType.дом,onChange:e=>y(["objectType","дом"],Number(e.target.value))})]})]})})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Коэффициенты типа здания"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Умножается на базовую цену"})]}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Новостройка (коэф.)"}),(0,a.jsx)(d.I,{type:"number",step:"0.1",value:h.buildingType.новостройка,onChange:e=>y(["buildingType","новостройка"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Вторичка (коэф.)"}),(0,a.jsx)(d.I,{type:"number",step:"0.1",value:h.buildingType.вторичка,onChange:e=>y(["buildingType","вторичка"],Number(e.target.value))})]})]})})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Санузлы"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Фиксированная цена за каждый санузел"})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"max-w-xs",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Цена за санузел (₽)"}),(0,a.jsx)(d.I,{type:"number",value:h.bathroomPrice,onChange:e=>y(["bathroomPrice"],Number(e.target.value))})]})})]}),(0,a.jsxs)(c.Z,{children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Дополнительные услуги"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Цены за дополнительные работы"})]}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Электрика (₽/м\xb2)"}),(0,a.jsx)(d.I,{type:"number",value:h.additionalServices.электрика.price,onChange:e=>y(["additionalServices","электрика","price"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Теплый пол (₽/м\xb2)"}),(0,a.jsx)(d.I,{type:"number",value:h.additionalServices.теплыйПол.price,onChange:e=>y(["additionalServices","теплыйПол","price"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Сантехника (₽)"}),(0,a.jsx)(d.I,{type:"number",value:h.additionalServices.сантехника.price,onChange:e=>y(["additionalServices","сантехника","price"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Перепланировка (₽)"}),(0,a.jsx)(d.I,{type:"number",value:h.additionalServices.перепланировка.price,onChange:e=>y(["additionalServices","перепланировка","price"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Натяжной потолок (₽/м\xb2)"}),(0,a.jsx)(d.I,{type:"number",value:h.additionalServices.натяжнойПотолок.price,onChange:e=>y(["additionalServices","натяжнойПотолок","price"],Number(e.target.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Дизайн-проект (₽)"}),(0,a.jsx)(d.I,{type:"number",value:h.additionalServices.дизайнПроект.price,onChange:e=>y(["additionalServices","дизайнПроект","price"],Number(e.target.value))})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(n.z,{onClick:v,variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Сбросить к умолчанию"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(n.z,{onClick:()=>e.back(),variant:"outline",children:"Отмена"}),(0,a.jsx)(n.z,{onClick:p,disabled:x,children:x?"Сохранение...":"Сохранить изменения"})]})]}),h.lastUpdated&&(0,a.jsx)(c.Z,{className:"p-4 bg-blue-50 border-blue-200",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Последнее обновление:"})," ",new Date(h.lastUpdated).toLocaleString("ru-RU")]})})]})})})]}):null}},6334:function(e,r,t){"use strict";t.d(r,{z:function(){return n}});var a=t(7437),s=t(2265),l=t(3448);let i=(0,t(535).j)("inline-flex items-center justify-center gap-2.5 whitespace-nowrap rounded-xl text-sm font-semibold transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-lg shadow-primary-500/30 hover:shadow-xl hover:shadow-primary-500/40 hover:scale-[1.02]",secondary:"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white shadow-lg shadow-secondary-500/25 hover:shadow-xl hover:shadow-secondary-500/35 hover:scale-[1.02]",outline:"border-2 border-primary-500 text-primary-600 hover:bg-primary-50 hover:border-primary-600 shadow-sm hover:shadow-md",ghost:"hover:bg-gray-100 text-gray-700 hover:text-primary-600",link:"text-primary-500 underline-offset-4 hover:underline hover:text-primary-600",premium:"bg-gradient-to-r from-blue-500 via-primary-500 to-accent-600 text-white shadow-xl shadow-primary-500/40 hover:shadow-2xl hover:shadow-primary-500/50 hover:scale-[1.02] border border-primary-400/50"},size:{default:"h-12 px-6 py-3",sm:"h-10 px-5 py-2.5 text-sm",lg:"h-14 px-8 py-4 text-base font-bold",xl:"h-16 px-10 py-5 text-lg font-bold",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),n=s.forwardRef((e,r)=>{let{className:t,variant:s,size:n,href:c,target:d,rel:o,children:m,type:x="button",...u}=e,h=(0,l.cn)(i({variant:s,size:n,className:t}));return c?(0,a.jsx)("a",{className:h,href:c,target:d,rel:o,children:m}):(0,a.jsx)("button",{className:h,ref:r,type:x,...u,children:m})});n.displayName="Button"},757:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var a=t(7437),s=t(3448);t(2265);let l=e=>{let{children:r,className:t,hover:l=!1,variant:i="default",onClick:n,style:c}=e;return(0,a.jsx)("div",{onClick:n,style:c,className:(0,s.cn)("rounded-2xl transition-all duration-500",{default:"bg-white shadow-md border border-gray-100/50 hover:border-gray-200",premium:"bg-gradient-to-br from-white to-gray-50/30 shadow-xl border border-gray-100/70 backdrop-blur-sm",glass:"bg-white/90 backdrop-blur-xl shadow-2xl border border-white/50"}[i],l?"hover:shadow-2xl hover:-translate-y-2 hover:scale-[1.02] cursor-pointer":"","p-8",t),children:r})}},2434:function(e,r,t){"use strict";t.d(r,{W:function(){return l}});var a=t(7437),s=t(3448);t(2265);let l=e=>{let{children:r,className:t}=e;return(0,a.jsx)("div",{className:(0,s.cn)("container-custom",t),children:r})}},2827:function(e,r,t){"use strict";t.d(r,{I:function(){return i}});var a=t(7437),s=t(2265),l=t(3448);let i=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("input",{className:(0,l.cn)("w-full rounded-lg border border-gray-200 bg-white px-4 py-3 text-sm text-gray-900","placeholder:text-gray-400 focus:border-primary-500 focus:outline-none focus:ring-2 focus:ring-primary-100","disabled:cursor-not-allowed disabled:bg-gray-100",t),ref:r,...s})});i.displayName="Input"},3448:function(e,r,t){"use strict";t.d(r,{cn:function(){return l}});var a=t(1994),s=t(3335);function l(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.m6)((0,a.W)(r))}}},function(e){e.O(0,[851,971,966,744],function(){return e(e.s=9743)}),_N_E=e.O()}]);