(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[795],{119:function(e,r,t){Promise.resolve().then(t.bind(t,7524))},9376:function(e,r,t){"use strict";var s=t(5475);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},7524:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return d}});var s=t(7437),a=t(2265),n=t(9376),i=t(2434),l=t(6334),o=t(757);function d(){let e=(0,n.useRouter)(),[r,t]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!0),[h,u]=(0,a.useState)([]),[m,x]=(0,a.useState)("all");(0,a.useEffect)(()=>{"authenticated"===localStorage.getItem("adminToken")?(t(!0),f()):e.push("/adminmaxrem"),c(!1)},[e]);let f=async()=>{try{let e=await fetch("/api/leads");if(e.ok){let r=await e.json();u(r)}}catch(e){console.error("Error loading leads:",e)}},p=async(e,r)=>{try{(await fetch("/api/leads/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:r})})).ok&&f()}catch(e){console.error("Error updating status:",e)}},g=async e=>{if(confirm("Удалить заявку?"))try{(await fetch("/api/leads/".concat(e),{method:"DELETE"})).ok&&f()}catch(e){console.error("Error deleting lead:",e)}},v=e=>new Date(e).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),y=e=>(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({new:"bg-blue-100 text-blue-800","in-progress":"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800"}[e]),children:{new:"Новая","in-progress":"В работе",completed:"Завершена"}[e]}),b="all"===m?h:h.filter(e=>e.status===m);return d?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-xl",children:"Загрузка..."})}):r?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow",children:(0,s.jsx)(i.W,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Заявки"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Управление заявками клиентов"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(l.z,{onClick:()=>e.push("/adminmaxrem/dashboard"),variant:"outline",children:"Назад"}),(0,s.jsx)(l.z,{onClick:()=>{localStorage.removeItem("adminToken"),e.push("/adminmaxrem")},variant:"outline",children:"Выйти"})]})]})})}),(0,s.jsx)("main",{className:"py-10",children:(0,s.jsxs)(i.W,{children:[(0,s.jsxs)("div",{className:"flex gap-2 mb-6",children:[(0,s.jsxs)(l.z,{onClick:()=>x("all"),variant:"all"===m?"default":"outline",children:["Все (",h.length,")"]}),(0,s.jsxs)(l.z,{onClick:()=>x("new"),variant:"new"===m?"default":"outline",children:["Новые (",h.filter(e=>"new"===e.status).length,")"]}),(0,s.jsxs)(l.z,{onClick:()=>x("in-progress"),variant:"in-progress"===m?"default":"outline",children:["В работе (",h.filter(e=>"in-progress"===e.status).length,")"]}),(0,s.jsxs)(l.z,{onClick:()=>x("completed"),variant:"completed"===m?"default":"outline",children:["Завершены (",h.filter(e=>"completed"===e.status).length,")"]})]}),(0,s.jsx)("div",{className:"space-y-4",children:0===b.length?(0,s.jsx)(o.Z,{className:"p-12",children:(0,s.jsx)("p",{className:"text-center text-gray-500",children:"Заявок нет"})}):b.map(e=>(0,s.jsx)(o.Z,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),y(e.status)]}),(0,s.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Телефон:"})," ",(0,s.jsx)("a",{href:"tel:".concat(e.phone),className:"text-blue-600 hover:underline",children:e.phone})]}),e.message&&(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Сообщение:"})," ",e.message]}),(0,s.jsx)("p",{className:"text-gray-400",children:v(e.createdAt)})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,s.jsxs)("select",{value:e.status,onChange:r=>p(e.id,r.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"new",children:"Новая"}),(0,s.jsx)("option",{value:"in-progress",children:"В работе"}),(0,s.jsx)("option",{value:"completed",children:"Завершена"})]}),(0,s.jsx)(l.z,{onClick:()=>g(e.id),variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:"Удалить"})]})]})},e.id))})]})})]}):null}},6334:function(e,r,t){"use strict";t.d(r,{z:function(){return l}});var s=t(7437),a=t(2265),n=t(3448);let i=(0,t(535).j)("inline-flex items-center justify-center gap-2.5 whitespace-nowrap rounded-xl text-sm font-semibold transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-gradient-to-r from-primary-500 to-primary-600 text-white shadow-lg shadow-primary-500/30 hover:shadow-xl hover:shadow-primary-500/40 hover:scale-[1.02]",secondary:"bg-gradient-to-r from-secondary-500 to-secondary-600 text-white shadow-lg shadow-secondary-500/25 hover:shadow-xl hover:shadow-secondary-500/35 hover:scale-[1.02]",outline:"border-2 border-primary-500 text-primary-600 hover:bg-primary-50 hover:border-primary-600 shadow-sm hover:shadow-md",ghost:"hover:bg-gray-100 text-gray-700 hover:text-primary-600",link:"text-primary-500 underline-offset-4 hover:underline hover:text-primary-600",premium:"bg-gradient-to-r from-amber-500 via-orange-500 to-primary-600 text-white shadow-xl shadow-orange-500/40 hover:shadow-2xl hover:shadow-orange-500/50 hover:scale-[1.02] border border-orange-400/50"},size:{default:"h-12 px-6 py-3",sm:"h-10 px-5 py-2.5 text-sm",lg:"h-14 px-8 py-4 text-base font-bold",xl:"h-16 px-10 py-5 text-lg font-bold",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,r)=>{let{className:t,variant:a,size:l,href:o,target:d,rel:c,children:h,type:u="button",...m}=e,x=(0,n.cn)(i({variant:a,size:l,className:t}));return o?(0,s.jsx)("a",{className:x,href:o,target:d,rel:c,children:h}):(0,s.jsx)("button",{className:x,ref:r,type:u,...m,children:h})});l.displayName="Button"},757:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});var s=t(7437),a=t(3448);t(2265);let n=e=>{let{children:r,className:t,hover:n=!1,variant:i="default",onClick:l,style:o}=e;return(0,s.jsx)("div",{onClick:l,style:o,className:(0,a.cn)("rounded-2xl transition-all duration-500",{default:"bg-white shadow-md border border-gray-100/50 hover:border-gray-200",premium:"bg-gradient-to-br from-white to-gray-50/30 shadow-xl border border-gray-100/70 backdrop-blur-sm",glass:"bg-white/90 backdrop-blur-xl shadow-2xl border border-white/50"}[i],n?"hover:shadow-2xl hover:-translate-y-2 hover:scale-[1.02] cursor-pointer":"","p-8",t),children:r})}},2434:function(e,r,t){"use strict";t.d(r,{W:function(){return n}});var s=t(7437),a=t(3448);t(2265);let n=e=>{let{children:r,className:t}=e;return(0,s.jsx)("div",{className:(0,a.cn)("container-custom",t),children:r})}},3448:function(e,r,t){"use strict";t.d(r,{cn:function(){return n}});var s=t(1994),a=t(3335);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,s.W)(r))}}},function(e){e.O(0,[851,971,966,744],function(){return e(e.s=119)}),_N_E=e.O()}]);